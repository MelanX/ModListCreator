plugins {
    id "java"
}

group "de.melanx.modlistcreator"
version "1.2.1"

repositories {
	mavenCentral()
    maven {
        url "https://jitpack.io"
    }
}

configurations {
	shade
	compile.extendsFrom shade
}
configurations.compile.extendsFrom(configurations.shade)

dependencies {
	shade "com.github.TheRandomLabs:CurseAPI:master-SNAPSHOT"
	shade "com.github.TheRandomLabs:CurseAPI-Minecraft:master-SNAPSHOT"

	shade "com.atlassian.commonmark:commonmark:0.13.1"
	shade "net.sf.jopt-simple:jopt-simple:6.0-alpha-3"
}

sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8'
println('Java: ' + System.getProperty('java.version') + ' JVM: ' + System.getProperty('java.vm.version') + '(' + System.getProperty('java.vendor') + ') Arch: ' + System.getProperty('os.arch'))

jar {
	manifest {
		attributes([
		        "Main-Class": "de.melanx.modlistcreator.ModListCreator"
		])
	}
	configurations.shade.each { dependency ->
		from(project.zipTree(dependency)) {
			exclude 'META-INF', 'META-INF/**'
		}
	}
}
